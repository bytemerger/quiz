<?php include 'app/views/includes/header.phtml'?>
<div class="container">
    <div class="row">
        <div class="col-md-4">
            <div>
                <img src="/app/public/img/avate.jpg" height="150" width="150">
            </div>
            <h4>
                Show us what you got <? ?>
            </h4>
            <div>
                <div id="del-countdown">
                    <div id="units">
                        <span>Hours</span>
                        <span>Minutes</span>
                        <span>Seconds</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-8">
            <div>
                Question NO.<?// print the no ?>
            </div>
            <div>
                <? //question ?>
            </div>
            <div>
                <form>
                    <div class="row">
                        <div class="radio col-md-6">
                            <label><input type="radio" name="answer" checked>Option 1</label>
                        </div>
                        <div class="radio col-md-6">
                            <label><input type="radio" name="answer">Option 2</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="radio col-md-6">
                            <label><input type="radio" name="answer" >Option 3</label>
                        </div>
                        <div class="radio col-md-6">
                            <label><input type="radio" name="answer" >Option 3</label>
                        </div>
                    </div>
                </form>
            </div>
            <div>
            </div>
        </div>
    </div>
</div>
<script>
    const updateTimer = (deadline) => {
        // calculates time left until deadline
        const time = deadline - new Date();
        return {
            'days': Math.floor(time / (1000 * 60 * 60 * 24)),
            'hours': Math.floor((time / (1000 * 60 * 60)) % 24),
            'minutes': Math.floor((time / (1000 * 60)) % 60),
            'seconds': Math.floor((time / (1000)) % 60),
            'total': time
        };
    }

    const animateClock = (span) => {
        // animation lasts for 0.5 seconds
        span.className = 'turn';
        setTimeout(() => {
            span.className = '';
        }, 500);
    }

    const startTimer = (id, deadline) => {
        // calls updateTimer every second
        const timeInterval = setInterval(() => {
            const clock = document.getElementById(id);
            let timer = updateTimer(deadline);

            clock.innerHTML =
                '<span>' + timer.days + '</span>' +
                '<span>' + timer.hours + '</span>' +
                '<span>' + timer.minutes + '</span>' +
                '<span>' + timer.seconds + '</span>';

            const spans = clock.getElementsByTagName("span");
            animateClock(spans[3]);
            if (timer.seconds == 59) animateClock(spans[2]);
            if (timer.minutes == 59 && timer.seconds == 59) animateClock(spans[1]);
            if (timer.minutes == 23 && timer.minutes == 59 && timer.seconds == 59) animateClock(spans[0]);


            // check if deadline has passed
            if (timer.total < 1) {
                clearInterval(timeInterval);
                clock.innerHTML =
                    '<span>0</span><span>0</span><span>0</span><span>0</span>';
            }

        }, 1000);
    }


    window.onload = () => {
        const deadline = new Date("December 23, 2019 13:00:00");
        startTimer("clock", deadline)
    };
</script>